$(document).ready(function(){$('#frm_order_tour1').find('#name_order').blur(function(){test_cost_name(this);});$('#frm_order_tour1').find('#name_order').click(function(){$(this).parent().parent().find('.error-text_name').remove();});$('#frm_order_tour1').find('#mail_order').blur(function(){test_cost_mail(this);});$('#frm_order_tour1').find('#mail_order').click(function(){$(this).parent().parent().find('.error-text_mail').remove();});$('#frm_order_tour1').find('#mes_order').blur(function(){test_cost_text(this);});$('#frm_order_tour1').find('#mes_order').click(function(){$(this).parent().find('.error-text').remove();});function test_cost_name(elem){$(elem).parent().parent().find('.correct-icon_name.correct-icon').remove();$(elem).parent().parent().find('.error-text.error-text_name').remove();if($(elem).val().trim()!=""){$('<div class="correct-icon correct-icon_name" style="vertical-align: baseline; width: auto;"><span class="form-validation-icon form-validation-ok"></span></div>').appendTo($(elem).parent().parent().find('label.name_lbl'));$(elem).removeAttr('incorrect');$(elem).attr('correct');}else{$(elem).attr('incorrect');$(elem).removeAttr('correct');var data="";switch(lang){case"ru":data="Укажите Ваше имя";break;case"en":data="Type in your name";break;case"cn":data="Type in your name";break;}
$('<div class="error-text error-text_name" style="right: 312px; top: 34px;">'+ data+'</div>').appendTo($(elem).parent().parent());return false;}
return true;}
function test_cost_mail(elem){$(elem).parent().parent().find('.correct-icon.correct-icon_mail').remove();$(elem).parent().parent().find('.error-text.error-text_mail').remove();if(isValidEmail($(elem).val())){$('<div class="correct-icon correct-icon_mail" style="vertical-align: baseline; width: auto;"><span class="form-validation-icon form-validation-ok"></span></div>').appendTo($(elem).parent().parent().find('label.mail_lbl'));$(elem).removeAttr('incorrect');$(elem).attr('correct');}else{$(elem).attr('incorrect');$(elem).removeAttr('correct');var data="";switch(lang){case"ru":data="Укажите Ваш E-mail";break;case"en":data="Type in your E-mail";break;case"cn":data="Type in your E-mail";break;}
$('<div class="error-text error-text_mail" style="top: 34px;">'+ data+'</div>').appendTo($(elem).parent().parent());return false;}
return true;}
function test_cost_text(elem){$(elem).parent().find('.correct-icon').remove();$(elem).parent().find('.error-text').remove();if($(elem).val().trim()!=""){$('<div class="correct-icon" style="max-width: 60%; top: 6px; right: 0px; position: absolute;"><span class="form-validation-icon form-validation-ok"></span></div>').appendTo($(elem).parent());$(elem).removeAttr('incorrect');$(elem).attr('correct');}else{$(elem).attr('incorrect');$(elem).removeAttr('correct');var data="";switch(lang){case"ru":data="Укажите Ваши пожелания";break;case"en":data="Type this field";break;case"cn":data="Type this field";break;}
$('<div class="error-text" style="top: 13px; right: 0px; position: absolute; max-width: 60%;">'+ data+'</div>').prependTo($(elem).parent());return false;}
return true;}
$('#frm_order_tour1').find('#accept_request_cost').click(function(){var ok=true;if(!test_cost_name($('#frm_order_tour1').find('#name_order')))
ok=false;if(!test_cost_mail($('#frm_order_tour1').find('#mail_order')))
ok=false;if(!test_cost_text($('#frm_order_tour1').find('#mes_order')))
ok=false;if(!ok)
return false;});$('.clck_join_gr').click(function(){var start_date=$('.start_date_main').val().trim();var end_date=$('.end_date_main').val().trim();var price=$('.price_main').val().trim();var id=$('.id_main').val().trim();var mode=$('.mode_main').val().trim();var discount=$('.price_discount').val().trim();var data=[];if($('.image_climbing_main').length>0){data.push({'url':"/route/"+ $('.url_climbing_main').val().trim(),'image':$('.image_climbing_main').val().trim(),'title':$('.title_climbing_main').val().trim(),'descr':$('.descr_climbing_main').val().trim(),'time':$('.time_climbing_main').val().trim()});}
if($('.image_safari_main').length>0){data.push({'url':"/safari/programs/"+ $('.url_safari_main').val().trim(),'image':$('.image_safari_main').val().trim(),'title':$('.title_safari_main').val().trim(),'descr':$('.descr_safari_main').val().trim(),'time':$('.time_safari_main').val().trim()});}
setModalData(start_date,end_date,price,id,mode,data,discount);});$('.clck_join_gr_data').click(function(){var start_date=$(this).parent().find('.start_date_gr_data').val().trim();var end_date=$(this).parent().find('.end_date_gr_data').val().trim();var price=$(this).parent().find('.price_gr_data').val().trim();var id=$(this).parent().find('.id_gr_data').val().trim();var mode=$(this).parent().find('.mode_gr_data').val().trim();var discount=$(this).parent().find('.price_discount_gr_data').val().trim();var data=[];if($(this).parent().find('.image_climbing_gr_data').length>0){data.push({'url':"/route/"+ $(this).parent().find('.url_climbing_gr_data').val().trim(),'image':$(this).parent().find('.image_climbing_gr_data').val().trim(),'title':$(this).parent().find('.title_climbing_gr_data').val().trim(),'descr':$(this).parent().find('.descr_climbing_gr_data').val().trim(),'time':$(this).parent().find('.time_climbing_gr_data').val().trim()});}
if($(this).parent().find('.image_safari_gr_data').length>0){data.push({'url':"/safari/programs/"+ $(this).parent().find('.url_safari_gr_data').val().trim(),'image':$(this).parent().find('.image_safari_gr_data').val().trim(),'title':$(this).parent().find('.title_safari_gr_data').val().trim(),'descr':$(this).parent().find('.descr_safari_gr_data').val().trim(),'time':$(this).parent().find('.time_safari_gr_data').val().trim()});}
setModalData(start_date,end_date,price,id,mode,data,discount);});function setModalData(start_date,end_date,price,id,mode,data,discount){$('#set_price_place').html(price);$('#set_start_date_place').html(start_date);$('#set_end_date_place').html(end_date);if(discount>0){$('#d_price_modal').css('display','inline');$('#d_price_modal font').html(discount);}else{$('#d_price_modal').css('display','none');}
$('#po__main').html("");for(var elem in data){var el=$('#disable_item').clone();$(el).css('display','block');$(el).removeAttr('id');$(el).find('.po__img div').css('background-image','url('+ data[elem]['image']+')');$(el).find('.po__title').html(data[elem]['title']);$(el).find('.preview_program_data').attr('href',data[elem]['url']);$(el).find('.po__length').html(data[elem]['time']);$(el).appendTo($('#po__main'));}
$('#set_g_mode').val(mode);$('#set_g_id').val(id);}});